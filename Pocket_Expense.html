<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6N0JHLBDCE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-6N0JHLBDCE");
  </script>
  <meta name="description"
    content="Pocket Expense helps you store all your expenses in one place, making it easier to track and manage your finances. Download your expense report as a PDF whenever needed." />
  <meta name="keywords"
    content="Pocket Expense, expense tracker, finance manager, budget tracker, expense PDF download, personal finance" />
  <meta name="author" content="Your Name or Company Name" />
  <meta property="og:title" content="Pocket Expense - Manage Your Finances Effortlessly" />
  <meta property="og:description"
    content="Track, manage, and store your expenses with Pocket Expense. Download your financial reports as PDFs anytime." />

  <meta name="description"
    content="Prime Projects offers free coding courses in all programming languages, project management tools, task manager, salary records, PDF to image conversion, coding blogs, and more. Learn coding and manage tasks effectively with practical tools and resources." />

  <!-- Keywords for SEO -->
  <meta name="keywords"
    content="coding courses, free coding projects, programming languages, bill management, task manager, PDF to image conversion, coding blogs, salary records, project management, task tracking, Prime Projects" />

  <!-- Author -->
  <meta name="author" content="Prime Projects" />

  <!-- Open Graph Meta Tags (For Social Media Sharing) -->
  <meta property="og:title" content="Prime Projects - Free Coding Courses and Projects" />
  <meta property="og:description"
    content="Explore free coding courses, projects, and tools to enhance your productivity, including task managers, PDF converters, salary record management, and more." />
  <meta property="og:image" content="https://primeprojects.netlify.app/img/favicon-32x32.png" />
  <!-- This image is your logo -->
  <meta property="og:url" content="https://primeprojects.netlify.app/" />
  <meta property="og:type" content="website" />

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Prime Projects - Free Coding Courses and Projects" />
  <meta name="twitter:description"
    content="Learn programming for free with various courses and tools, including task management and salary record tracking." />
  <meta name="twitter:image" content="https://primeprojects.netlify.app/img/favicon-32x32.png" />

  <!-- Favicon -->
  <link rel="icon" href="https://primeprojects.netlify.app/img/favicon-32x32.png" type="image/png" />
  <link rel="apple-touch-icon" href="https://primeprojects.netlify.app/img/favicon-32x32.png" />

  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow" />
  <meta name="msapplication-TileImage" content="https://primeprojects.netlify.app/img/favicon-32x32.png" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://primeprojects.netlify.app/" />

  <!-- Schema Markup (Structured Data for SEO) -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Prime Projects",
        "url": "https://primeprojects.netlify.app/",
        "logo": "https://primeprojects.netlify.app/img/favicon-32x32.png",
        "sameAs": [
          "https://www.facebook.com/primeprojects",
          "https://twitter.com/primeprojects",
          "https://www.linkedin.com/company/primeprojects"
        ],
        "description": "Prime Projects offers free coding courses in various languages, tools for project management, and more."
      }
    </script>
  <!-- Additional Structured Data (for Reviews, Courses, and Projects) -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Course",
        "name": "Free Programming Courses",
        "description": "Learn coding with free courses in Python, JavaScript, HTML, and more at Prime Projects.",
        "provider": {
          "@type": "Organization",
          "name": "Prime Projects",
          "url": "https://primeprojects.netlify.app/"
        }
      }
    </script>
  <title>Pocket Expense</title>

  <!-- External Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    h2 {
      font-size: 2rem;
      color: red;
      font-weight: bold;
      margin-top: 20px;
    }

    .input-box {
      padding: 10px;
      margin: 5px;
      border: 1px solid gray;
      border-radius: 5px;
      width: 90%;
      max-width: 300px;
    }

    button {
      margin: 10px 5px;
      padding: 10px 15px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
    }

    .delete-btn {
      background-color: red;
      color: white;
    }

    .download-btn {
      background-color: #008cba;
      color: white;
    }

    .tb {
      max-height: 1500px;
      overflow-x: auto;
      margin: 20px auto;
      width: 95%;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
      table-layout: auto;
    }

    th,
    td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
      font-size: 0.9rem;
    }

    th {
      background-color: #4caf50;
      color: white;
    }

    tfoot td {
      background-color: #eaeaea;
      font-weight: bold;
    }

    .heading-row td {
      background-color: #ffe6e6;
      color: #cc0000;
      font-weight: bold;
      font-size: 1rem;
    }

    /* ✅ Responsive Design */
    @media (max-width: 768px) {
      h2 {
        font-size: 1.5rem;
      }

      .input-box {
        width: 100%;
      }

      button {
        width: 100%;
        margin: 5px 0;
      }
    }

    /* Scroll wrapper for responsive layout */
  .tb {
    width: 100%;
    overflow-x: auto;
    margin: 20px auto;
    padding: 20px;

  }

  table {
    border-collapse: collapse;
    background-color: white;
    table-layout: auto;
    min-width: 1300px; /* Table will scroll on small devices if screen < 600px */
    margin: 0 auto;   /* Center the table on larger screens */
  }

  th,
  td {
    border: 1px solid black;
    padding: 8px;
    text-align: center;
    font-size: 0.9rem;
  }

  th {
    background-color: #4caf50;
    color: white;
  }

  tfoot td {
    background-color: #eaeaea;
    font-weight: bold;
  }

  .heading-row td {
    background-color: #ffe6e6;
    color: #cc0000;
    font-weight: bold;
    font-size: 1rem;
  }

  /* Optional: Style scrollbar */
  .tb-container::-webkit-scrollbar {
    height: 6px;
  }

  /* Hide scrollbar on wide screens (not necessary, just cleaner) */
  @media (min-width: 768px) {
    .tb-container {
      overflow-x: hidden;
    }
  }
  </style>
</head>

<body>
  <!-- Loader Wrapper strat -->
  <link rel="stylesheet" href="loder.css" />
  <script src="loder.js"></script>
  <div id="load-screen">
    <div class="circle-animation"></div>
    <div class="loading-text">primeprojects...</div>
  </div>
  <!-- Loader Wrapper and -->
  <script src="sin.js"></script>

  <h2>Pocket Expense</h2>
  <!-- Toggle Button -->
  <button id="toggleBtn" onclick="toggleSidebar()" style="
        position: fixed;
        left: 10px;
        top: 10px;
        font-size: 24px;
        z-index: 1000;
        background: none;
        border: none;
        cursor: pointer;
      ">
    ☰
  </button>

  <!-- Sidebar container -->
  <div id="sidebar" style="
        position: fixed;
        top: 0;
        left: -250px; /* hidden by default */
        width: 250px;
        height: 100%;
        background: #f1f1f1;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
        padding: 20px;
        overflow-y: auto;
        transition: left 0.3s ease;
        z-index: 999;
      ">
    <ul id="storesList" style="list-style: none; padding: 0; margin: 0"></ul>
  </div>

  <!-- Existing product input form etc. -->

  <input type="text" id="productName" class="input-box" placeholder="Product Name" />
  <input type="number" id="productPrice" class="input-box" placeholder="Price" />
  <br />

  <select id="transactionType" class="input-box">
    <option value="credit">Credit</option>
    <option value="debit">Debit</option>
  </select>
  <button onclick="addProduct()" style="background-color: green; color: white">
    Add Product
  </button>

  <br />

  <input type="text" id="customHeading" class="input-box" placeholder="Add Custom Heading" />
  <button onclick="addHeading()" style="background-color: blue; color: white">
    Add Heading
  </button>

   <div class="tb">
    <table>
      <thead>
        <tr>
          <th>S.No</th>
          <th>Expense Name</th>
          <th>Price (₹)</th>
          <th>Total (₹)</th>
          <th>Type</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="productTable"></tbody>
      <tfoot>
        <tr>
          <td colspan="3">Total Credit</td>
          <td colspan="4" id="totalCredit">₹0</td>
        </tr>
        <tr>
          <td colspan="3">Total Debit</td>
          <td colspan="4" id="totalDebit">₹0</td>
        </tr>
        <tr>
          <td colspan="3">Total Balance</td>
          <td colspan="4" id="totalBalance">₹0</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <button onclick="deleteAllProducts()" class="delete-btn">Delete All</button>
  <button onclick="downloadPDF()" class="download-btn">Download PDF</button>
  <!-- New Excel download button -->
  <button onclick="downloadExcel()" class="download-btn" style="background-color: orange; color: white">
    Download Excel
  </button>
  <script>
  let activeStore = localStorage.getItem("activeStore") || "defaultStore";
  let sidebarVisible = false;

  function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");
    sidebarVisible = !sidebarVisible;
    sidebar.style.left = sidebarVisible ? "0" : "-250px";
  }

  function toTitleCase(str) {
    return str
      .toLowerCase()
      .split(" ")
      .filter(word => word.trim() !== "")
      .map(word => word[0].toUpperCase() + word.slice(1))
      .join(" ");
  }

  function loadStores() {
    let stores = JSON.parse(localStorage.getItem("stores")) || [];
    let storesList = document.getElementById("storesList");
    storesList.innerHTML = "";

    stores.forEach((store) => {
      let displayName = toTitleCase(store);
      let activeClass = store === activeStore ? "active-store" : "";
      let li = document.createElement("li");
      li.textContent = displayName;
      li.className = activeClass;
      li.onclick = () => {
        setActiveStore(store);
        toggleSidebar();
      };
      storesList.appendChild(li);
    });

    let newStoreBtn = document.createElement("button");
    newStoreBtn.textContent = "➕ New Store";
    newStoreBtn.className = "new-store-btn";
    newStoreBtn.onclick = () => {
      createNewStore();
      toggleSidebar();
    };
    storesList.appendChild(newStoreBtn);
  }

  function setActiveStore(store) {
    activeStore = store;
    localStorage.setItem("activeStore", activeStore);
    loadStores();
    loadProducts();
  }

  function createNewStore() {
    let newStoreName = prompt("Enter new store name:");
    if (!newStoreName) return;

    newStoreName = toTitleCase(newStoreName);
    let stores = JSON.parse(localStorage.getItem("stores")) || [];

    if (stores.includes(newStoreName)) {
      alert("Store name already exists! Choose a different name.");
      return;
    }

    stores.push(newStoreName);
    localStorage.setItem("stores", JSON.stringify(stores));
    localStorage.setItem(newStoreName, JSON.stringify([]));

    setActiveStore(newStoreName);
  }

  function loadProducts() {
    let products = JSON.parse(localStorage.getItem(activeStore)) || [];
    let table = document.getElementById("productTable");
    table.innerHTML = "";

    let totalCredit = 0,
      totalDebit = 0,
      sn = 1;
    let cumulativeCredit = 0,
      cumulativeDebit = 0;

    products.forEach((product, index) => {
      if (product.isHeading) {
        let headingText = toTitleCase(product.heading);
        table.innerHTML += `
          <tr class="heading-row">
            <td colspan="6">${headingText}</td>
            <td><button class="delete-btn" onclick="deleteProduct(${index})">Delete</button></td>
          </tr>`;
      } else {
        let color = product.type === "credit" ? "green" : "red";
        let price = parseFloat(product.price);

        if (product.type === "credit") {
          totalCredit += price;
          cumulativeCredit += price;
        } else {
          totalDebit += price;
          cumulativeDebit += price;
        }

        let totalCell =
          product.type === "credit"
            ? `${cumulativeCredit.toFixed(2)}`
            : `${cumulativeDebit.toFixed(2)}`;

        table.innerHTML += `
          <tr>
            <td>${sn++}</td>
            <td>${toTitleCase(product.name)}</td>
            <td style="color:${color}; font-weight:bold;">${product.price}</td>
            <td>${totalCell}</td>
            <td style="color:${color}; font-weight:bold;">${product.type}</td>
            <td>${product.date}</td>
            <td><button class="delete-btn" onclick="deleteProduct(${index})">Delete</button></td>
          </tr>`;
      }
    });

    document.getElementById("totalCredit").innerText = totalCredit.toFixed(2);
    document.getElementById("totalDebit").innerText = totalDebit.toFixed(2);
    document.getElementById("totalBalance").innerText = (
      totalCredit - totalDebit
    ).toFixed(2);
  }

  function addProduct() {
    let name = toTitleCase(document.getElementById("productName").value.trim());
    let price = document.getElementById("productPrice").value;
    let type = document.getElementById("transactionType").value;
    let date = new Date().toLocaleDateString();

    if (!name || !price) {
      alert("Please enter both product name and price.");
      return;
    }

    let products = JSON.parse(localStorage.getItem(activeStore)) || [];
    products.push({ name, price, type, date });
    localStorage.setItem(activeStore, JSON.stringify(products));

    document.getElementById("productName").value = "";
    document.getElementById("productPrice").value = "";
    loadProducts();
  }

  function addHeading() {
    let heading = toTitleCase(document.getElementById("customHeading").value.trim());
    if (!heading) {
      alert("Please enter a heading.");
      return;
    }

    let products = JSON.parse(localStorage.getItem(activeStore)) || [];
    products.push({ isHeading: true, heading });
    localStorage.setItem(activeStore, JSON.stringify(products));

    document.getElementById("customHeading").value = "";
    loadProducts();
  }

  function deleteProduct(index) {
    let products = JSON.parse(localStorage.getItem(activeStore)) || [];
    products.splice(index, 1);
    localStorage.setItem(activeStore, JSON.stringify(products));
    loadProducts();
  }

  function deleteAllProducts() {
    if (
      confirm(`Are you sure you want to delete the entire store "${toTitleCase(activeStore)}"?`)
    ) {
      localStorage.removeItem(activeStore);
      let stores = JSON.parse(localStorage.getItem("stores")) || [];
      stores = stores.filter((store) => store !== activeStore);
      localStorage.setItem("stores", JSON.stringify(stores));

      if (stores.length > 0) {
        activeStore = stores[0];
        localStorage.setItem("activeStore", activeStore);
      } else {
        activeStore = "defaultStore";
        localStorage.setItem("activeStore", activeStore);
        localStorage.setItem("stores", JSON.stringify([activeStore]));
        localStorage.setItem(activeStore, JSON.stringify([]));
      }

      loadStores();
      loadProducts();
      alert("Store deleted successfully.");
    }
  }

  function downloadPDF() {
    const { jsPDF } = window.jspdf;
    let doc = new jsPDF();
    doc.setFontSize(18);
    doc.text(`Pocket Expense - ${toTitleCase(activeStore)}`, 70, 15);

    let products = JSON.parse(localStorage.getItem(activeStore)) || [];
    let totalCredit = document.getElementById("totalCredit").innerText;
    let totalDebit = document.getElementById("totalDebit").innerText;
    let totalBalance = document.getElementById("totalBalance").innerText;

    let tableData = [];
    let displayIndex = 1;
    let cumulativeCredit = 0,
      cumulativeDebit = 0;

    products.forEach((product) => {
      if (product.isHeading) {
        tableData.push([
          {
            content: toTitleCase(product.heading),
            colSpan: 6,
            styles: {
              halign: "center",
              fontStyle: "bold",
              fillColor: [230, 230, 230],
            },
          },
        ]);
      } else {
        let color = product.type === "credit" ? [0, 128, 0] : [255, 0, 0];
        let price = parseFloat(product.price);
        let totalCell = "";

        if (product.type === "credit") {
          cumulativeCredit += price;
          totalCell = `${cumulativeCredit.toFixed(2)}`;
        } else {
          cumulativeDebit += price;
          totalCell = `${cumulativeDebit.toFixed(2)}`;
        }

        tableData.push([
          displayIndex++,
          toTitleCase(product.name),
          { content: `${product.price}`, styles: { textColor: color } },
          totalCell,
          {
            content:
              product.type.charAt(0).toUpperCase() + product.type.slice(1),
            styles: { textColor: color },
          },
          product.date,
        ]);
      }
    });

    doc.autoTable({
      head: [["S.No", "Name", "Price", "Total", "Type", "Date"]],
      body: tableData,
      theme: "grid",
      startY: 20,
      styles: { fontSize: 10 },
      headStyles: { fillColor: [100, 149, 237], textColor: 255 },
    });

    let finalY = doc.lastAutoTable.finalY + 10;
    doc.setFontSize(12);
    doc.text(`Total Credit: ${totalCredit}`, 14, finalY);
    doc.text(`Total Debit: ${totalDebit}`, 14, finalY + 8);
    doc.text(`Total Balance: ${totalBalance}`, 14, finalY + 16);

    doc.save(`Pocket_Expense_${toTitleCase(activeStore)}.pdf`);
  }

  function downloadExcel() {
    let products = JSON.parse(localStorage.getItem(activeStore)) || [];
    let tableData = [];
    let sn = 1;
    let cumulativeCredit = 0,
      cumulativeDebit = 0;

    tableData.push([
      "S.No",
      "Expense Name",
      "Price",
      "Total",
      "Type",
      "Date",
    ]);

    products.forEach((product) => {
      if (product.isHeading) {
        tableData.push([toTitleCase(product.heading), "", "", "", "", ""]);
      } else {
        let price = parseFloat(product.price);
        let totalCell = "";

        if (product.type === "credit") {
          cumulativeCredit += price;
          totalCell = cumulativeCredit.toFixed(2);
        } else {
          cumulativeDebit += price;
          totalCell = cumulativeDebit.toFixed(2);
        }

        tableData.push([
          sn++,
          toTitleCase(product.name),
          price,
          totalCell,
          product.type.charAt(0).toUpperCase() + product.type.slice(1),
          product.date,
        ]);
      }
    });

    let totalCredit = cumulativeCredit.toFixed(2);
    let totalDebit = cumulativeDebit.toFixed(2);
    let totalBalance = (cumulativeCredit - cumulativeDebit).toFixed(2);

    tableData.push([]);
    tableData.push(["Total Credit", totalCredit]);
    tableData.push(["Total Debit", totalDebit]);
    tableData.push(["Total Balance", totalBalance]);

    let ws = XLSX.utils.aoa_to_sheet(tableData);
    let wb = XLSX.utils.book_new();
    XLSX.utils.book_append_sheet(wb, ws, "Pocket Expense");
    XLSX.writeFile(wb, `Pocket_Expense_${toTitleCase(activeStore)}.xlsx`);
  }

  window.onload = function () {
    let stores = JSON.parse(localStorage.getItem("stores")) || [];
    if (stores.length === 0) {
      stores = ["defaultStore"];
      localStorage.setItem("stores", JSON.stringify(stores));
      localStorage.setItem("defaultStore", JSON.stringify([]));
      localStorage.setItem("activeStore", "defaultStore");
      activeStore = "defaultStore";
    }

    loadStores();
    loadProducts();
  };
</script>


  <!-- Include XLSX library for Excel export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <!--sin in-->
</body>

</html>