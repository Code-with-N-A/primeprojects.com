<!DOCTYPE html>
<html lang="en">
  <head>
     <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6N0JHLBDCE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6N0JHLBDCE');
</script>

  <!-- Keywords for SEO -->
  <meta name="keywords" content="coding courses, free coding projects, programming languages, bill management, task manager, PDF to image conversion, coding blogs, salary records, project management, task tracking, Prime Projects">
  
  <!-- Author -->
  <meta name="author" content="Prime Projects">

  <!-- Open Graph Meta Tags (For Social Media Sharing) -->
  <meta property="og:title" content="Prime Projects - Free Coding Courses and Projects">
  <meta property="og:description" content="Explore free coding courses, projects, and tools to enhance your productivity, including task managers, PDF converters, salary record management, and more.">
  <meta property="og:image" content="https://primeprojects.netlify.app/img/favicon-32x32.png"> <!-- This image is your logo -->
  <meta property="og:url" content="https://primeprojects.netlify.app/">
  <meta property="og:type" content="website">
  
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Prime Projects - Free Coding Courses and Projects">
  <meta name="twitter:description" content="Learn programming for free with various courses and tools, including task management and salary record tracking.">
  <meta name="twitter:image" content="https://primeprojects.netlify.app/img/favicon-32x32.png">

  <!-- Favicon -->
  <link rel="icon" href="https://primeprojects.netlify.app/img/favicon-32x32.png" type="image/png">
  <link rel="apple-touch-icon" href="https://primeprojects.netlify.app/img/favicon-32x32.png">
  
  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow">
  <meta name="msapplication-TileImage" content="https://primeprojects.netlify.app/img/favicon-32x32.png">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://primeprojects.netlify.app/">

  <!-- Schema Markup (Structured Data for SEO) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Prime Projects",
    "url": "https://primeprojects.netlify.app/",
    "logo": "https://primeprojects.netlify.app/img/favicon-32x32.png",
    "sameAs": [
      "https://www.facebook.com/primeprojects",
      "https://twitter.com/primeprojects",
      "https://www.linkedin.com/company/primeprojects"
    ],
    "description": "Prime Projects offers free coding courses in various languages, tools for project management, and more."
  }
  </script>

  <!-- Additional Structured Data (for Reviews, Courses, and Projects) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Course",
    "name": "Free Programming Courses",
    "description": "Learn coding with free courses in Python, JavaScript, HTML, and more at Prime Projects.",
    "provider": {
      "@type": "Organization",
      "name": "Prime Projects",
      "url": "https://primeprojects.netlify.app/"
    }
  }
  </script>

    <meta charset="UTF-8" />
    <title>Secure User App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <style>
      #popupOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(10, 10, 10, 0.85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      .popupContent {
        background: white;
        padding: 30px 40px;
        border-radius: 12px;
        max-width: 800px;
        width: 90%;
        font-size: 1.1rem;
        line-height: 1.7;
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.2);
        animation: fadeIn 0.5s ease-in-out;
      }

      .popupContent h2 {
        margin-top: 0;
        color: #007bff;
        text-align: center;
        font-size: 1.8rem;
      }

      .popupContent ul {
        padding-left: 20px;
      }

      .popupContent ul li {
        margin-bottom: 10px;
      }

      .popupContent mark {
        background-color: yellow;
        font-weight: bold;
      }

      .popupContent button {
        display: block;
        margin: 20px auto 0;
        padding: 12px 25px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
      }

      .popupContent button:hover {
        background-color: #0056b3;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Reset and base font */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background: #f4f6f9;
        margin: 0;
        padding: 0;
      }

      /* Container centers and restricts max width */
      .container {
        max-width: 700px;
        margin: 0 auto;
        width: 100%;
        overflow: hidden;
      }

      /* Heading */
      h1 {
        text-align: center;
        margin-bottom: 40px;
        word-wrap: break-word;
      }

      /* Form styles */
      form {
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        overflow-wrap: break-word;
      }

      /* Inputs and buttons */
      input,
      button {
        width: 100%;
        padding: 12px 15px;
        margin: 10px 0;
        font-size: 1rem;
        border-radius: 5px;
        border: 1px solid #ccc;
        display: block;
      }

      button {
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #0056b3;
      }

      /* Table styling */
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        table-layout: fixed; /* Fix column width to avoid overflow */
        word-wrap: break-word;
      }

      th,
      td {
        border: 1px solid #ccc;
        padding: 10px 8px;
        text-align: center;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      /* Messages */
      .message {
        text-align: center;
        margin: 10px 0;
        font-weight: bold;
        word-wrap: break-word;
      }

      .error {
        color: red;
      }

      .success {
        color: green;
      }

      .processing {
        color: orange;
      }

      /* Responsive breakpoints */

      /* Extra small devices (phones, <480px) */
      @media (max-width: 479px) {
        .container {
          padding: 15px 10px;
          max-width: 100%;
        }

        input,
        button {
          font-size: 1rem;
          padding: 12px 10px;
          margin: 8px 0;
        }

        table,
        th,
        td {
          font-size: 0.85rem;
          padding: 8px 6px;
        }
      }

      /* Small devices (phones and small tablets, 480px - 767px) */
      @media (min-width: 480px) and (max-width: 767px) {
        .container {
          max-width: 95%;
          padding: 20px 15px;
        }

        input,
        button {
          font-size: 1.05rem;
          padding: 13px 12px;
        }

        table,
        th,
        td {
          font-size: 0.9rem;
          padding: 9px 8px;
        }
      }

      /* Medium devices (tablets, 768px - 991px) */
      @media (min-width: 768px) and (max-width: 991px) {
        .container {
          max-width: 900px;
          padding: 20px;
          width: 100%;
        }

        input,
        button {
          font-size: 1.1rem;
          padding: 14px 15px;
        }

        table,
        th,
        td {
          font-size: 1rem;
          padding: 10px 9px;
        }
      }

      /* Large devices (desktops, 992px and above) */
      @media (min-width: 992px) {
        .container {
          max-width: 700px;
          padding: 20px 30px;
        }

        input,
        button {
          font-size: 1.1rem;
          padding: 15px 18px;
        }

        table,
        th,
        td {
          font-size: 1rem;
          padding: 10px 12px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Popup Overlay -->
    <div id="popupOverlay">
      <div class="popupContent">
        <h2>Welcome to MyPassStore</h2>
        <p><strong>Instructions & Conditions:</strong></p>
        <ul>
          <li>
            <mark>OTP Verification</mark> is mandatory before accessing the main
            form.
          </li>
          <li>
            <mark>Email</mark> must be valid. (Checked using
            <code>validateEmail()</code>)
          </li>
          <li>
            <mark>OTP</mark> is 6 digits. Max attempts: <strong>11</strong>.
            You’ll get warning after <strong>5</strong> wrong tries.
          </li>
          <li>
            <mark>Local Storage</mark> is used to store your data securely.
          </li>
          <li>
            Use <strong>“Download PDF”</strong> to save your data offline using
            <code>jsPDF</code>.
          </li>
          <li>
            You can <strong>Delete individual entries</strong> or use
            <strong>“Delete All”</strong> to wipe your data.
          </li>
          <li>
            <strong>Passwords</strong> are saved exactly as entered. Be cautious
            with your entries.
          </li>
          <li>
            <strong>All fields</strong> are required in the form. Empty
            submissions not allowed.
          </li>
        </ul>
        <p style="color: red">
          <strong>⚠ Important:</strong> Do not reload the page while entering
          OTP or data may be lost.
        </p>
        <button onclick="closePopup()">I Understand</button>
      </div>
    </div>

    <div class="container">
      <h1>MyPassStore</h1>
      <div id="messageBox" class="message"></div>

      <!-- Email Form -->
      <form id="emailForm">
        <input
          type="email"
          id="emailInput"
          placeholder="Enter your Email"
          required
        />
        <button type="submit" id="sendOtpBtn">Send OTP</button>
      </form>

      <!-- OTP Form -->
      <form id="otpForm" style="display: none">
        <input
          type="text"
          id="otpInput"
          placeholder="Enter OTP"
          required
          maxlength="6"
        />
        <button type="submit" id="verifyOtpBtn">Verify OTP</button>
      </form>

      <!-- User Data Form -->
      <form id="userForm" style="display: none">
        <input type="text" id="name" placeholder="Name" required />
        <input type="text" id="desc" placeholder="Description" required />
        <input type="password" id="pass" placeholder="Password" required />
        <button type="submit">Save</button>
        <button type="button" onclick="downloadPDF()">Download PDF</button>
        <button type="button" onclick="deleteAll()">Delete All</button>
      </form>

      <!-- Users Table -->
      <table id="userTable" style="display: none">
        <thead>
          <tr>
            <th>NO</th>
            <th>Name</th>
            <th>Description</th>
            <th>Password</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const popupShown = sessionStorage.getItem("popupShown");
        if (!popupShown) {
          document.getElementById("popupOverlay").style.display = "flex";
          sessionStorage.setItem("popupShown", "true");
        }
      });

      function closePopup() {
        document.getElementById("popupOverlay").style.display = "none";
      }

      let currentEmail = localStorage.getItem("currentEmail") || "";
      let otpCode = "";
      let otpTries = 0;
      let maxOtpTries = 11;
      let warnAfter = 5;

      const msgBox = document.getElementById("messageBox");
      const emailForm = document.getElementById("emailForm");
      const otpForm = document.getElementById("otpForm");
      const userForm = document.getElementById("userForm");
      const userTable = document.getElementById("userTable");
      const emailInput = document.getElementById("emailInput");
      const sendOtpBtn = document.getElementById("sendOtpBtn");

      // Show message function
      function showMsg(msg, type = "error") {
        msgBox.innerText = msg;
        msgBox.className = `message ${type}`;
      }

      // Email validation
      function validateEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      // Load users from localStorage for currentEmail
      function loadUsersForEmail(email) {
        let allUsers = JSON.parse(localStorage.getItem("allUsers") || "{}");
        return allUsers[email] || [];
      }

      // Save users for currentEmail
      function saveUsersForEmail(email, users) {
        let allUsers = JSON.parse(localStorage.getItem("allUsers") || "{}");
        allUsers[email] = users;
        localStorage.setItem("allUsers", JSON.stringify(allUsers));
      }

      // Load user data in table
      function loadData() {
        const users = loadUsersForEmail(currentEmail);
        const tbody = userTable.querySelector("tbody");
        tbody.innerHTML = "";
        if (users.length === 0) {
          userTable.style.display = "none";
          return;
        }
        userTable.style.display = "table";
        users.forEach((u, i) => {
          const row = document.createElement("tr");
          row.innerHTML = `
        <td>${i + 1}</td>
        <td>${u.name}</td>
        <td>${u.desc}</td>
        <td>${u.pass}</td>
        <td>${u.date}</td>
        <td><button onclick="deleteRow(${i})">Delete</button></td>
      `;
          tbody.appendChild(row);
        });
      }

      // Delete single row
      function deleteRow(index) {
        let users = loadUsersForEmail(currentEmail);
        users.splice(index, 1);
        saveUsersForEmail(currentEmail, users);
        loadData();
        showMsg("Entry deleted.", "success");
      }

      // Delete all data for currentEmail
      function deleteAll() {
        if (confirm("Are you sure you want to delete all data?")) {
          let allUsers = JSON.parse(localStorage.getItem("allUsers") || "{}");
          delete allUsers[currentEmail];
          localStorage.setItem("allUsers", JSON.stringify(allUsers));
          loadData();
          userForm.reset();
          userForm.style.display = "none";
          userTable.style.display = "none";
          showMsg("All data deleted.", "success");
        }
      }

      // Download PDF
      function downloadPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const users = loadUsersForEmail(currentEmail);

        if (users.length === 0) {
          showMsg("No data to download!", "error");
          return;
        }

        doc.text("User Password", 90, 10);
        doc.autoTable({
          head: [["NO", "Name", "Description", "Password", "Date"]],
          body: users.map((u, i) => [i + 1, u.name, u.desc, u.pass, u.date]),
          startY: 20,
          theme: "grid",
        });
        doc.save("user_data.pdf");
      }

      // Send OTP email (simulate with formsubmit.co)
      async function sendOtpEmail(email, otp) {
        try {
          showMsg("Sending OTP... Please wait.", "processing");
          await fetch(`https://formsubmit.co/ajax/${email}`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ otp: otp, message: "Your OTP is: " + otp }),
          });
          showMsg("OTP sent to your email.", "success");
        } catch (error) {
          showMsg("Failed to send OTP. Try again later.", "error");
        }
      }

      // Send passwords to email before deleting on multiple failed attempts
      async function sendPasswordsToEmail(email) {
        let users = loadUsersForEmail(email);
        if (users.length === 0) return;
        const content = users
          .map((u) => `Name: ${u.name}, Password: ${u.pass}`)
          .join("\n");
        try {
          await fetch(`https://formsubmit.co/ajax/${email}`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              message: "Your saved passwords:\n" + content,
            }),
          });
        } catch (e) {
          console.log("Error sending passwords email", e);
        }
      }

      // Initial UI setup
      function setupInitialUI() {
        if (currentEmail) {
          emailInput.value = currentEmail;
          emailForm.style.display = "block";
          otpForm.style.display = "none";
          userForm.style.display = "none";
          sendOtpBtn.innerText = "Send OTP";
          showMsg(`Welcome back! Enter OTP sent to ${currentEmail}`, "success");
        } else {
          emailForm.style.display = "block";
          otpForm.style.display = "none";
          userForm.style.display = "none";
          showMsg("Enter your email to start.", "success");
        }
      }

      // Email Form submit
      emailForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        let email = emailInput.value.trim();

        if (!validateEmail(email)) {
          showMsg("Invalid email format!", "error");
          return;
        }

        // Check if same email or new
        if (currentEmail && email !== currentEmail) {
          // New email => reset user data for that email
          currentEmail = email;
          localStorage.setItem("currentEmail", currentEmail);
          otpTries = 0;
        } else if (!currentEmail) {
          currentEmail = email;
          localStorage.setItem("currentEmail", currentEmail);
          otpTries = 0;
        }

        // Generate and send OTP
        otpCode = Math.floor(100000 + Math.random() * 900000).toString();
        await sendOtpEmail(currentEmail, otpCode);

        // Show OTP form, hide email form
        emailForm.style.display = "none";
        otpForm.style.display = "block";
        userForm.style.display = "none";
        showMsg(`OTP sent to ${currentEmail}. Please enter OTP.`, "success");
      });

      // OTP Form submit
      otpForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        let enteredOtp = document.getElementById("otpInput").value.trim();

        otpTries++;

        if (enteredOtp === otpCode) {
          showMsg("OTP verified successfully!", "success");
          otpForm.style.display = "none";
          userForm.style.display = "block";
          loadData();
        } else {
          if (otpTries === warnAfter) {
            showMsg(
              `Warning: You have ${warnAfter} wrong attempts. On 6th wrong attempt, your data will be sent to your email and deleted.`,
              "error"
            );
          } else if (otpTries === warnAfter + 1) {
            // Send passwords and delete data after 6th wrong try
            await sendPasswordsToEmail(currentEmail);
            let allUsers = JSON.parse(localStorage.getItem("allUsers") || "{}");
            delete allUsers[currentEmail];
            localStorage.setItem("allUsers", JSON.stringify(allUsers));
            showMsg(
              "After 5 wrong OTPs, all your data will be deleted automatically."
            );
            otpForm.style.display = "none";
            emailForm.style.display = "block";
            userForm.style.display = "none";
            localStorage.removeItem("currentEmail");
            currentEmail = "";
            otpTries = 0;
            return;
          } else if (otpTries >= maxOtpTries) {
            // 11th wrong attempt
            await sendPasswordsToEmail(currentEmail);
            let allUsers = JSON.parse(localStorage.getItem("allUsers") || "{}");
            delete allUsers[currentEmail];
            localStorage.setItem("allUsers", JSON.stringify(allUsers));
            showMsg(
              "11 wrong attempts! Your data sent to email and deleted.",
              "error"
            );
            otpForm.style.display = "none";
            emailForm.style.display = "block";
            userForm.style.display = "none";
            localStorage.removeItem("currentEmail");
            currentEmail = "";
            otpTries = 0;
            return;
          } else {
            showMsg(`Wrong OTP! Attempts: ${otpTries}`, "error");
          }
        }
        document.getElementById("otpInput").value = "";
      });

      // User form submit - Save data
      userForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("name").value.trim();
        const desc = document.getElementById("desc").value.trim();
        const pass = document.getElementById("pass").value.trim();

        if (name === "" || desc === "" || pass === "") {
          showMsg("All fields are required.", "error");
          return;
        }

        let users = loadUsersForEmail(currentEmail);

        // Check if email already has user data with same email, allow multiple or not?
        // As per your request, new email creates new account, same email continues to add data.

        // Add new user
        users.push({
          name,
          desc,
          pass,
          date: new Date().toLocaleString(),
        });

        saveUsersForEmail(currentEmail, users);
        loadData();
        userForm.reset();
        showMsg("Data saved successfully!", "success");
      });

      // On page load
      window.onload = () => {
        setupInitialUI();
      };
    </script>
  </body>
</html>
